<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>Cloning Instagram Note：AWS, Parse and Cocoapods | James&#39; Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="This article introduces steps to build an iOS app and link it to Parse platform on AWS via Cocoapods.">
<meta property="og:type" content="article">
<meta property="og:title" content="Cloning Instagram Note：AWS, Parse and Cocoapods">
<meta property="og:url" content="http://yoursite.com/2019/07/30/InsClone/index.html">
<meta property="og:site_name" content="James&#39; Blog">
<meta property="og:description" content="This article introduces steps to build an iOS app and link it to Parse platform on AWS via Cocoapods.">
<meta property="og:locale" content="English">
<meta property="og:image" content="http://ww3.sinaimg.cn/large/006tNc79gy1g5i4wycjq9j31kq0l8wiw.jpg">
<meta property="og:image" content="http://ww3.sinaimg.cn/large/006tNc79gy1g5i6qvkznnj32la0t848q.jpg">
<meta property="og:image" content="http://ww4.sinaimg.cn/large/006tNc79gy1g5i6wqm7zpj31dg0tqdn8.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/006tNc79gy1g5i72urysmj31mb0u0du8.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/006tNc79gy1g5j1sfqtp2j31jq0u0k7x.jpg">
<meta property="og:image" content="http://ww4.sinaimg.cn/large/006tNc79gy1g5j2k64b2ij31hx0u0gtz.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/006tNc79gy1g5j2li5f3pj31bw0tytdq.jpg">
<meta property="og:image" content="http://ww4.sinaimg.cn/large/006tNc79gy1g5j31q780bj312j0u00wg.jpg">
<meta property="og:image" content="http://ww2.sinaimg.cn/large/006tNc79gy1g5j347214tj31460u0n5w.jpg">
<meta property="og:image" content="http://ww4.sinaimg.cn/large/006tNc79gy1g5j3qf1085j32720qwkej.jpg">
<meta property="og:image" content="http://ww2.sinaimg.cn/large/006tNc79gy1g5j3n12xocj31hr0u04cq.jpg">
<meta property="og:image" content="http://ww3.sinaimg.cn/large/006tNc79gy1g5j41oiij5j31jh0u0dxa.jpg">
<meta property="og:image" content="http://ww2.sinaimg.cn/large/006tNc79gy1g5j46zvgqpj30qm09sq7i.jpg">
<meta property="og:image" content="http://ww2.sinaimg.cn/large/006tNc79gy1g5j4brrqkdj30wq0gc78z.jpg">
<meta property="og:image" content="http://ww2.sinaimg.cn/large/006tNc79gy1g5j4i1lqrlj30y20u0gsh.jpg">
<meta property="og:image" content="http://ww3.sinaimg.cn/large/006tNc79gy1g5j4jq6xd8j313z0u0do6.jpg">
<meta property="og:image" content="http://ww3.sinaimg.cn/large/006tNc79gy1g5j4lytfwqj319o0u0haf.jpg">
<meta property="og:image" content="http://ww2.sinaimg.cn/large/006tNc79gy1g5j4qgqqkfj31kw0kwwxy.jpg">
<meta property="og:updated_time" content="2019-07-31T09:10:13.049Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Cloning Instagram Note：AWS, Parse and Cocoapods">
<meta name="twitter:description" content="This article introduces steps to build an iOS app and link it to Parse platform on AWS via Cocoapods.">
<meta name="twitter:image" content="http://ww3.sinaimg.cn/large/006tNc79gy1g5i4wycjq9j31kq0l8wiw.jpg">
  
    <link rel="alternate" href="/atom.xml" title="James&#39; Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">James&#39; Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-InsClone" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/30/InsClone/" class="article-date">
  <time datetime="2019-07-30T12:11:26.000Z" itemprop="datePublished">2019-07-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Cloning Instagram Note：AWS, Parse and Cocoapods
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- # Cloning Instagram Note：AWS, Parse and Cocapod -->
<p>This article introduces steps to build an iOS app and link it to Parse platform on AWS via Cocoapods.</p>
<a id="more"></a>

<h2 id="1-Introduction-to-the-Ingredients"><a href="#1-Introduction-to-the-Ingredients" class="headerlink" title="1. Introduction to the Ingredients"></a>1. Introduction to the Ingredients</h2><h3 id="1-1-Amazon-Web-Service-AWS"><a href="#1-1-Amazon-Web-Service-AWS" class="headerlink" title="1.1 Amazon Web Service (AWS)"></a>1.1 Amazon Web Service (AWS)</h3><p>What is Amazon Web Service? According to Wikipedia:</p>
<blockquote>
<p>Amazon Web Services (AWS) is a subsidiary of Amazon that provides on-demand <strong>cloud computing platforms</strong> to individuals, companies, and governments, on a metered pay-as-you-go basis. In aggregate, these cloud computing web services provide a set of <strong>primitive abstract technical infrastructure</strong> and distributed computing building blocks and tools. </p>
</blockquote>
<p>In short, it is a platform of multiple cloud computing forms. We today, however, only use one of them: EC2. You may find EC2 in the upper bar of AWS under the category of Compute. We are using AWS not only because it provides a 12-month free trial, but also it’s stable enough and you can find huge amount of supporting document online.<br><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g5i4wycjq9j31kq0l8wiw.jpg" alt><br>Be patient. We still need to know what EC2 is before we use it. According to Wikipedia: </p>
<blockquote>
<p>Amazon Elastic Compute Cloud (EC2) forms a central part of Amazon.com’s cloud-computing platform, Amazon Web Services (AWS), by allowing users to rent virtual computers on which to <strong>run their own computer applications</strong>. EC2 encourages scalable deployment of applications by providing a web service through which a user can boot an Amazon Machine Image (AMI) to configure a <strong>virtual machine</strong>, which Amazon calls an <strong>“instance”</strong>, containing any software desired. </p>
</blockquote>
<p>In short, it is a virtual computer to run our own apps. It is “elastic” because it charges according to the number of users of your app. The more people are using it, the more it charges. </p>
<h3 id="1-2-Parse"><a href="#1-2-Parse" class="headerlink" title="1.2 Parse"></a>1.2 Parse</h3><p>The next thing we need is Parse. What is Parse? According to Wikipedia:</p>
<blockquote>
<p>Parse was a <strong>mobile backend</strong> as a service platform originally developed by the provider Parse, Inc.</p>
</blockquote>
<p>By “mobile backend”, it means that Parse is a backend management platform on cloud. It provides multiple services, including server setup, database management, API, storage, notification pushing and data analysis etc.<br>To put it in a easy way, EC2 is a computer setup for you, only it’s on the cloud; while Parse is the OS running on it.<br>We are using Parse because it’s open-source while providing basic functions that are all very useful to us. </p>
<h3 id="1-2-Cocoapods"><a href="#1-2-Cocoapods" class="headerlink" title="1.2 Cocoapods"></a>1.2 Cocoapods</h3><p>What is Cocoapods? According to its official website (cocoapods.org):</p>
<blockquote>
<p>CocoaPods is a dependency manager for Swift and Objective-C Cocoa projects. It has over 64 thousand libraries and is used in over 3 million apps. CocoaPods can help you scale your projects elegantly.</p>
</blockquote>
<p>Basically, it is a manager for libraries that saves you time and trouble to add them manually. </p>
<h2 id="2-Step-by-Step"><a href="#2-Step-by-Step" class="headerlink" title="2. Step by Step"></a>2. Step by Step</h2><h3 id="2-1-Create-a-new-account-on-AWS"><a href="#2-1-Create-a-new-account-on-AWS" class="headerlink" title="2.1 Create a new account on AWS"></a>2.1 Create a new account on AWS</h3><p>This step is as simple as creating an account on Google. You just go to aws.amazon.com, click the upper-right corner and follow the steps.<br>There is two things you might want to pay attention to:<br>First, the only way of verification way is by phone calling. Thus if you are out of the United States, don’t hesitate to look for assistant. They’re 24/7.<br>Second, it takes several hours to setup EC2 even though other functions may be available immediately after you create your account. Be patient. </p>
<h3 id="2-2-Setup-AWS"><a href="#2-2-Setup-AWS" class="headerlink" title="2.2 Setup AWS"></a>2.2 Setup AWS</h3><p>By clicking on “EC2”, you will enter EC2 Dashboard, as it’s shown below. Now you want to launch a virtual machine on EC2. Recall the Wikipedia quote from above, the virtual machine is referred by Amazon as “Instance”. You may click the “Launch Instance” from Create Instance.<br><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g5i6qvkznnj32la0t848q.jpg" alt><br>After Clicking into it, you want to first select “AWS Marketplace”, and search for “Parse”. Then the first one is what we want. Click “Select”.<br><img src="http://ww4.sinaimg.cn/large/006tNc79gy1g5i6wqm7zpj31dg0tqdn8.jpg" alt><br>Click “Continue” when you see a window pops up. Then you will see the interface as shown in the image below.<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g5i72urysmj31mb0u0du8.jpg" alt><br>After launching it,you need to have a key pair. Since it’s our first time launching it, we will create a new key pair. You can pick whatever name you like, and download the key pair.<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g5j1sfqtp2j31jq0u0k7x.jpg" alt><br>That’s all for the AWS. </p>
<h3 id="2-3-Setup-Parse"><a href="#2-3-Setup-Parse" class="headerlink" title="2.3 Setup Parse"></a>2.3 Setup Parse</h3><p>We use Cocoapods to do so. As we mentioned above, it allows you to use many libraries, and Parse is one of them. To install it, use terminal, and type:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gem install cocoapods</span><br></pre></td></tr></table></figure>
<p>Next step, create your Xcode project, and access your project folder with terminal. Enter the following to your terminal to initialize it </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod init</span><br></pre></td></tr></table></figure>
<p>Then we want to create a new podfile:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">open -a Xcode Podfile</span><br></pre></td></tr></table></figure>
<p>Then a text file window will pop up. We want to edit it so that Cocoapods knows we want to setup Parse. We search Parse in cocoapods.org.<br><img src="http://ww4.sinaimg.cn/large/006tNc79gy1g5j2k64b2ij31hx0u0gtz.jpg" alt><br>Follow its steps:<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g5j2li5f3pj31bw0tytdq.jpg" alt><br>In the Podfile, all the lines starst with a # is commented. Delete all uncommented line and replace them with “<strong>pod ‘Parse’</strong>“.Remember not to delete the final “end”.<br>Finally, enter the following to install Parse with Cocoapods </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod install</span><br></pre></td></tr></table></figure>
<p>It takes some time to finish up, especially for those who are not in the United States. That ends this step.</p>
<h3 id="2-4-Link-Project-to-AWS"><a href="#2-4-Link-Project-to-AWS" class="headerlink" title="2.4 Link Project to AWS"></a>2.4 Link Project to AWS</h3><p>First, we need to use the “xcodeworkspace” that integrates in Cocoapods instead of “xcodeproj”. You will need to reopen Xcode by clicking onto the “.xcodeworkspace” file in your project folder.<br>The official website of Parse (parseplatform.org) provides codes to finish such task. In this site, if you scroll down, you will find “Parse Server Guide” under Documents<br><img src="http://ww4.sinaimg.cn/large/006tNc79gy1g5j31q780bj312j0u00wg.jpg" alt><br>Since we are using Parse SDK (Software Development Kit) with Parse server, and we are developing with Swift, we copy the code below.<br><img src="http://ww2.sinaimg.cn/large/006tNc79gy1g5j347214tj31460u0n5w.jpg" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let configuration = ParseClientConfiguration &#123;</span><br><span class="line">    $0.applicationId = &quot;YOUR_APP_ID&quot;</span><br><span class="line">    $0.clientKey = &quot;&quot;</span><br><span class="line">    $0.server = &quot;http://localhost:1337/parse&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Parse.initialize(with: configuration)<br>We want to put the code into AppDelegate.swift. We want our app link to AWS as soon as it launches, so we put it under didFinishLaunching. Remember to import Parse at the beginning of the code.<br><img src="http://ww4.sinaimg.cn/large/006tNc79gy1g5j3qf1085j32720qwkej.jpg" alt><br>Now we need to configure the lines of code. We need to know 3 things: appId, clientKey and server, and then we can initialize Parse with our configuration.<br>First, we know our server: it’s Parse running on EC2 of AWS. In your Instance page, you will find the Public DNS on the right bottom corner, which is the address of your EC2 server. To make it your parse server, you just need to add “/parse” at the end of it.<br><img src="http://ww2.sinaimg.cn/large/006tNc79gy1g5j3n12xocj31hr0u04cq.jpg" alt><br>Next, click “connect” at the top, and a window will pop up. First, we need to use “chmod” to change the visibility of the key pair. You need to go to whichever folder that stores the key pair and run the command. Afterwards, use the example ssh line to access your server.<br><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g5j41oiij5j31jh0u0dxa.jpg" alt><br>Then, go to the folder of:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd apps/parse/htdocs</span><br></pre></td></tr></table></figure>
<p>and use vim or other editor to open server.js.<br><img src="http://ww2.sinaimg.cn/large/006tNc79gy1g5j46zvgqpj30qm09sq7i.jpg" alt><br>Then you will find your appId and clientKey under Parse Dashboard. Note that clientKey is the masterKey.<br><img src="http://ww2.sinaimg.cn/large/006tNc79gy1g5j4brrqkdj30wq0gc78z.jpg" alt></p>
<h3 id="2-4-Testing"><a href="#2-4-Testing" class="headerlink" title="2.4 Testing"></a>2.4 Testing</h3><p>Parse official website actually provides us with a testing code in iOS guide under SDKs and Libraries as shown below.<br><img src="http://ww2.sinaimg.cn/large/006tNc79gy1g5j4i1lqrlj30y20u0gsh.jpg" alt><br>The code is in the subtitle of “Saving Objects”. Since we are developing with Swift, don’t forget to switch to Swift.<br><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g5j4jq6xd8j313z0u0do6.jpg" alt><br>We will put the code under viewDidLoad of ViewController, so this code will run as soon as the app is loaded. Again, don’t forget to import Parse.<br><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g5j4lytfwqj319o0u0haf.jpg" alt><br>Since Apple has recently updated its security standard, we actually need to go to Info.plist and add on a “App Transport Security Settings” and “Allow Arbitrary Loads” under it. Set the later one to “Yes”.<br><img src="http://ww2.sinaimg.cn/large/006tNc79gy1g5j4qgqqkfj31kw0kwwxy.jpg" alt><br>If you run the app, and see “Success!” in your console, congratulations! You have succeeded in linking your app with AWS! Now your app have a cloud storage on AWS. </p>
<!-- ### 2.5 See Data Uploaded to Parse -->

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/07/30/InsClone/" data-id="cjyr156yh0001iw4a2q7jtmzx" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2019/07/29/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/07/30/InsClone/">Cloning Instagram Note：AWS, Parse and Cocoapods</a>
          </li>
        
          <li>
            <a href="/2019/07/29/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 James Wu<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>